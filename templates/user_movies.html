{% extends "base.html" %}

{% block title %}{{ user.name }}'s Movies - Movie Web App{% endblock %}

{% block content %}
    <div class="user-header">
        <div class="user-header-content">
            <h1>{{ user.name }}'s Favorite Movies</h1>
            <div class="user-header-actions">
                <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê Back to Users</a>
                <!-- Delete User Button -->
                <form action="{{ url_for('delete_user', user_id=user.id) }}" 
                      method="post" class="delete-user-form">
                    <button type="submit" class="btn btn-danger" 
                            onclick="return confirm('Are you sure you want to delete this user and all their movies? This cannot be undone!')">
                        Delete User
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div class="movies-section">
        {% if movies %}
            <div class="movies-grid">
                {% for movie in movies %}
                    <div class="movie-card">
                        <div class="movie-info">
                            <h3>{{ movie.title }}</h3>
                            <p class="movie-director">Director: {{ movie.director }}</p>
                            <p class="movie-year">Year: {{ movie.year }}</p>
                            {% if movie.rating %}
                                <p class="movie-rating">Rating: {{ movie.rating }}/10</p>
                            {% endif %}
                        </div>
                        <div class="movie-actions">
                            <a href="{{ url_for('edit_movie_form', user_id=user.id, movie_id=movie.id) }}" 
                               class="btn btn-edit">Edit</a>
                            <form action="{{ url_for('delete_movie', user_id=user.id, movie_id=movie.id) }}" 
                                  method="post" class="delete-form">
                                <button type="submit" class="btn btn-delete" 
                                        onclick="return confirm('Are you sure you want to delete this movie?')">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-movies">
                <p>No movies found for this user.</p>
            </div>
        {% endif %}
    </div>

    <div class="add-movie-section">
        <a href="{{ url_for('add_movie_form', user_id=user.id) }}" class="btn btn-primary">+ Add Movie</a>
    </div>
{% endblock %}